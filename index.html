<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Utilities Hub</title> <!-- More generic title -->
    <link rel="stylesheet" type="text/css" href="style.css" />

    <!-- Global Utility Scripts -->
    <script type="text/javascript" src="utils.js"></script>
    <script type="text/javascript" src="settings.js"></script> <!-- For getSetting, saveSetting -->
    <script type="text/javascript" src="marquee.js"></script>
    <script type="text/javascript" src="rss_reader.js"></script> <!-- Added as a global utility -->

    <!-- Core App Logic & Base Classes -->
    <script type="text/javascript" src="BaseView.js"></script>
    <script type="text/javascript" src="RssFeedView.js"></script>
    <script type="text/javascript" src="SettingsView.js"></script>
    <script type="text/javascript" src="RandomListerView.js"></script>
    <script type="text/javascript" src="RandomNumberView.js"></script>
    <script type="text/javascript" src="CoinFlipperView.js"></script>
    <script type="text/javascript" src="TarkovRouletteView.js"></script> <!-- Added TarkovRouletteView -->
    <script type="text/javascript" src="App.js"></script>
    <!-- Specific View class files will be created later -->

    <noscript>JavaScript needs to be enabled to run this program.</noscript>
    <script>
        // Early theme application
        if (typeof loadAndApplyInitialTheme === 'function') {
            loadAndApplyInitialTheme();
        } else {
            console.warn('loadAndApplyInitialTheme function not found. Ensure settings.js is loaded correctly.');
        }
    </script>
</head>
<body>
    <!-- Marquee is prepended by loadMarquee() in utils.js -->
    <div id="nav-placeholder"></div> <!-- Navigation menu is loaded here -->

    <main id="app-content">
        <!-- Dynamic content will be rendered here by App.js -->
        <p>Loading...</p> <!-- Initial placeholder content -->
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize global UI components
            if (typeof loadMarquee === 'function') loadMarquee();
            // Load nav, active based on hash. Default to #home if no hash.
            if (typeof loadNavigationMenu === 'function') loadNavigationMenu(window.location.hash || '#home'); 
            
            // Initialize the App (Router and Views)
            if (typeof App === 'function' && 
                typeof RssFeedView === 'function' && 
                typeof SettingsView === 'function' &&
                typeof RandomListerView === 'function' &&
                typeof RandomNumberView === 'function' &&
                typeof CoinFlipperView === 'function' &&
                typeof TarkovRouletteView === 'function') {
                const appRoutes = {
                    '#home': RssFeedView,
                    '#settings': SettingsView,
                    '#random-lister': RandomListerView,
                    '#random-number': RandomNumberView,
                    '#coin-flipper': CoinFlipperView,
                    '#tarkov-roulette': TarkovRouletteView,
                };
                new App(appRoutes);
            } else {
                const appContent = document.getElementById('app-content');
                if (appContent) {
                    appContent.innerHTML = '<p class="error">Error: App class not found. Site cannot load.</p>';
                }
                console.error('App class definition not found.');
            }
        });
    </script>
</body>
</html>